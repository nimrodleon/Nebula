<app-receivable-container>
  <h4 class="text-uppercase text-center">Resumen de Deudas por Cobrar</h4>
  <h5 class="text-uppercase text-center text-danger">
    <span>Total a Cobrar</span>
    <span class="mx-1">:</span>
    <span>{{resumenDeuda.totalPorCobrar.toFixed(4)|currency}}</span>
  </h5>
  <div class="accordion accordion-flush" id="accordionFlushExample">
    @for (item of resumenDeuda.deudasPorCliente; track $index) {
    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
          [attr.data-bs-target]="'#flush-collapse' + $index" aria-expanded="false" aria-controls="flush-collapseOne">
          <div class="d-flex justify-content-between w-100 fw-bold">
            <span>{{item.contactName}}</span>
            <span class="text-end text-primary-emphasis me-2">Debe: {{item.deudaTotal.toFixed(4)|currency}}</span>
          </div>
        </button>
      </h2>
      <div [id]="'flush-collapse'+$index" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
        <div class="accordion-body">
          <div class="table-responsive">
            <table class="table mb-0">
              <thead class="table-secondary">
                <tr class="text-uppercase">
                  <th>#</th>
                  <th>Fecha</th>
                  <th>Concepto</th>
                  <th>Nro. Doc</th>
                  <th>Cargo</th>
                  <th>Saldo</th>
                </tr>
              </thead>
              <tbody>
                @for (item of item.receivables; track $index) {
                <tr class="text-uppercase">
                  <th>{{$index + 1}}</th>
                  <td>{{item.createdAt|date}}</td>
                  <td>{{item.remark}}</td>
                  <td>{{item.document}}</td>
                  <td>{{item.cargo.toFixed(4)|currency}}</td>
                  <td>{{item.saldo.toFixed(4)|currency}}</td>
                </tr>
                }
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    }
  </div>
</app-receivable-container>
