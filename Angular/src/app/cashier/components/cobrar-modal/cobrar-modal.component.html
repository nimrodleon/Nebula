<div class="modal fade"
     data-bs-backdrop="static"
     data-bs-keyboard="false"
     id="cobrar-modal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          <fa-icon [icon]="faBars"></fa-icon>
          <span class="text-uppercase ms-1">Cobrar Venta</span>
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="cobrarForm">
          <ng-container *ngIf="true else success">
            <div class="row">
              <div class="col-6">
                <div class="mb-2">
                  <label class="form-label text-uppercase">Forma de pago</label>
                  <select formControlName="paymentType" class="form-select">
                    <option value="Credito">CRÉDITO</option>
                    <option value="Contado">CONTADO</option>
                  </select>
                </div>
                <div class="mb-1">
                  <label class="form-label text-uppercase">Fecha de Vencimiento</label>
                  <input type="date" formControlName="endDate" class="form-control">
                </div>
              </div>
              <div class="col-6">
                <div class="mb-2">
                  <label class="form-label text-uppercase">Numeración</label>
                  <select formControlName="docType" class="form-select">
                    <option value="BL">BOLETA</option>
                    <option value="FT">FACTURA</option>
                    <option value="NV">NOTA DE VENTA</option>
                  </select>
                </div>
                <div class="mb-1">
                  <div class="form-label">
                    <div class="form-check form-switch">
                      <input class="form-check-input" type="checkbox"
                             formControlName="montoCaja" role="switch" id="flexSwitchCheckDefault">
                      <label class="form-check-label text-uppercase" for="flexSwitchCheckDefault">Monto Caja</label>
                    </div>
                  </div>
                  <input type="number" formControlName="montoTotal" step="0.1" class="form-control">
                </div>
              </div>
            </div>
            <div class="row">
              <ng-container *ngIf="cobrarForm.get('paymentType')?.value !== 'Contado'">
                <div class="col-12">
                  <div class="table-responsive">
                    <table class="table table-striped mb-1">
                      <thead>
                      <tr class="text-uppercase">
                        <th># Cuota</th>
                        <th>Fecha Venc.</th>
                        <th>Monto</th>
                        <th></th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr *ngFor="let item of listaDeCuotas">
                        <td>{{item.numCuota}}</td>
                        <td>{{item.endDate|date}}</td>
                        <td>{{item.amount|currency}}</td>
                        <td class="text-end">
                          <button type="button" (click)="deleteItemCuota(item.numCuota)" class="btn btn-danger btn-sm">
                            <fa-icon [icon]="faTrashAlt"></fa-icon>
                          </button>
                        </td>
                      </tr>
                      </tbody>
                    </table>
                  </div>
                  <a (click)="addCuotaModal($event)" href="#" class="text-uppercase">Agregar Cuota</a>
                </div>
              </ng-container>
              <div class="col-12">
                <label for="remark" class="form-label text-uppercase">Observaciones</label>
                <textarea class="form-control" formControlName="remark" id="remark" rows="2"></textarea>
              </div>
            </div>
          </ng-container>
          <ng-template #success>
            <div class="div-success">
              <fa-icon [icon]="faCheckSquare"></fa-icon>
              <span class="d-block">TOTAL: 122.00</span>
              <span class="d-block text-danger">VUELTO: 20.00</span>
            </div>
            <div class="sendEmail">
              <label class="form-label fw-bold">ENVIAR POR CORREO</label>
              <div class="input-group">
                <input type="text" class="form-control">
                <button class="btn btn-success" type="button">
                  <fa-icon [icon]="faEnvelope"></fa-icon>
                  <span class="text-uppercase ms-1">Enviar</span>
                </button>
              </div>
            </div>
          </ng-template>
        </form>
        <pre>{{cobrarForm.value|json}}</pre>
        <pre>{{listaDeCuotas|json}}</pre>
      </div>
      <div class="modal-footer justify-content-center">
        <button type="button" class="btn btn-secondary btn-lg" data-bs-dismiss="modal">
          <span class="text-uppercase">Cerrar</span>
        </button>
        <ng-container *ngIf="true else print">
          <button type="button" (click)="cobrarVenta()" class="btn btn-primary btn-lg">
            <span class="text-uppercase">Cobrar</span>
          </button>
        </ng-container>
        <ng-template #print>
          <button type="button" class="btn btn-primary btn-lg">
            <span class="text-uppercase">Imprimir</span>
          </button>
        </ng-template>
      </div>
    </div>
  </div>
</div>

<app-cuota-modal (responseData)="hideCuotaModal($event)"></app-cuota-modal>
